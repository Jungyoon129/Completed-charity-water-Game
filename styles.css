/* ========= Brand tokens ========= */
:root{
  --cw-yellow:#FFC907;
  --cw-blue:#2E9DF7;

  --cw-lightblue:#8BD1CB;
  --cw-green:#4FCB53;
  --cw-orange:#FF902A;
  --cw-red:#F5402C;
  --cw-darkgreen:#159A48;
  --cw-pink:#F16061;

  --ink:#222;
  --paper:#FFF6E5;

  /* Jerrycan size controls (desktop defaults) */
  --can-size-desktop: 184px;  /* 기존 200px → 184px */
  --can-size-wide:    124px;  /* 기존 133px → 124px */
  --can-size: var(--can-size-desktop);
}

*{box-sizing:border-box}
body{
  margin:0;
  display:grid;
  place-items:center;
  background:#f2f2f2;
  color:var(--ink);
  font-family:
    "Proxima Nova","Avenir Next",Avenir,
    system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
}

.phone{
  width:min(380px,92vw);
  height:760px;
  background:var(--paper);
  border-radius:18px;
  box-shadow:0 16px 40px rgba(0,0,0,.12);
  border:1px solid #e8e1d4;
  position:relative;
  overflow:hidden;
}
@supports (height: 100svh){
  .phone{ height:min(760px,92svh); }
}

.top{display:flex;align-items:center;justify-content:space-between;padding:14px 16px}
.logo{height:28px;width:180px;background:#E2E8E0;border-radius:6px;display:grid;place-items:center}
.logo img{width:90%;height:auto;display:block}

.resetBtn{
  background:var(--cw-yellow);
  border:none;border-radius:10px;
  padding:6px 12px;
  font-weight:800;
  cursor:pointer;
}

.scoreCenter{font-weight:800;text-align:center;margin:12px 0 6px 0;font-size:20px}

/* Speed Up badge */
.boostBadge{
  text-align:center;
  font-weight:900;
  color:var(--cw-red);
  margin-bottom:8px;
  animation:pop 280ms ease;
}

/* Bars */
.bars{padding:6px 18px 0 18px;display:flex;flex-direction:column;gap:12px}
.bar{position:relative;height:18px;background:#fff;border:1px solid #dcdcdc;border-radius:999px;overflow:hidden}
.bar .label{position:absolute;inset:0;display:grid;place-items:center;color:#0b4a6e;font-weight:700;font-size:12px;pointer-events:none}
.fill{position:absolute;inset:0 auto 0 0;width:100%;background:linear-gradient(90deg,var(--cw-blue),#91d5ff)}

/* Dual bar */
.bar.-dual{position:relative}
.bar.-dual .fill-left{position:absolute;left:0;top:0;height:100%;width:0;background:linear-gradient(90deg,var(--cw-blue),#8bd2ff)}
.bar.-dual .fill-right{position:absolute;right:0;top:0;height:100%;width:0;background:linear-gradient(90deg,#b2866b,#8b6f5a)}
.bar.-dual .caps{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;padding:0 6px;font-size:11px;color:#053b5e;font-weight:700}

/* Playfield & motion */
.play{position:absolute;inset:220px 0 92px 0;overflow:hidden}
.drop{position:absolute;top:-60px;display:block;width:48px;height:48px}
.drop.clean{--c:var(--cw-blue)}
.drop.dirty{--c:#8b6f5a}
.drop.obstacle{--c:var(--cw-red)}
.drop:before{content:"";position:absolute;inset:0;background:var(--c);border-radius:20px 20px 50% 50% / 30% 30% 70% 70%;transform:rotate(45deg)}
.drop:after{content:"";position:absolute;bottom:4px;left:50%;transform:translateX(-50%);width:80%;height:18px;border-radius:999px;background:rgba(255,255,255,.35)}

@keyframes fall {
  from { top: var(--start, -60px); }
  to   { top: calc(100% - var(--h)); }
}

/* Jerry can — 모바일 기본 (사이즈 축소 + 약간 위로) */
.canWrap{
  position:absolute;
  bottom:28px;                 /* 기존 16px → 28px */
  left:calc(50% - 68px);       /* 초기 중앙 배치 (드래그 시 JS가 덮어씀) */
  width:136px;                 /* 기존 150px → 136px */
  transform:none;
  touch-action:none;
}
.can{
  width:136px;                 /* 기존 150px → 136px */
  height:136px;
  position:relative;
  background:none;
  display:block;
}
.can img{display:block;width:100%;height:100%;object-fit:contain;user-drag:none;-webkit-user-drag:none;pointer-events:none}

/* ===== Modals ===== */
.backdrop{position:absolute;inset:0;background:#00000099;display:none;align-items:center;justify-content:center}
.modal{width:88%;max-width:340px;background:var(--paper);border-radius:16px;box-shadow:0 20px 40px #00000040;border:1px solid #eee;text-align:center;overflow:hidden}
.modalHeader{background:var(--cw-yellow);padding:10px 14px;font-weight:900}
.modalBody{padding:18px;line-height:1.3}
.lineTop{font-size:14px;font-weight:700;color:#374151;margin:0 0 6px}
.bigNumber{font-size:40px;font-weight:900;color:#111;margin:0}
.lineBottom{font-size:14px;font-weight:700;color:#374151;margin:6px 0 10px}
.miniNote{font-size:12px;margin-top:10px}
.row{display:flex;gap:8px;justify-content:center;padding:0 0 16px}
.row button{background:var(--cw-yellow);border:none;border-radius:999px;padding:10px 16px;font-weight:800;cursor:pointer}
.row .ghost{background:#eaeaea;color:#222}

/* Start modal extra: links + difficulty chips */
.row.row-links{display:flex;gap:8px;justify-content:center;padding:10px 16px 4px;flex-wrap:wrap}
.linkBtn{
  display:inline-block;border-radius:999px;padding:8px 14px;font-weight:800;text-decoration:none;
  border:1px solid #e6e6e6;background:#fff;color:#111;transition:transform .06s ease, box-shadow .12s ease;
}
.linkBtn:hover{transform:translateY(-1px)}
.linkBtn.-donate{background:var(--cw-yellow);border-color:#e0b800;color:#111}

.diffSet{border:none;margin:8px 0 4px;padding:0}
.diffSet legend{font-size:12px;color:#555;margin-bottom:6px}
.chip{display:inline-flex;align-items:center;margin:0 6px 6px 0}
.chip input{appearance:none;width:0;height:0;margin:0}
.chip span{
  display:inline-block;padding:6px 12px;border-radius:999px;border:1px solid #e6e6e6;background:#fff;font-weight:800;cursor:pointer;
}
.chip input:checked + span{background:#fff9d6;border-color:#e6cf66}

/* ===== Footer ===== */
.gameFooter {
  position: absolute;
  left: 0; right: 0; bottom: 0;
  text-align: center;
  font-size: 9px;           /*  13px → 9px */
  line-height: 0.5;          /* 1.2 → 0.5 */
  padding: 2px 5px;         /* 10px 12px → 4px 6px */
  background: #fffaf0;
  border-top: 1px solid #eadfcb;
  z-index: 2;
}
.gameFooter a {
  color: var(--cw-blue);
  font-weight: 800;
  text-decoration: none;
}
.gameFooter a:hover { text-decoration: underline; }

/* ===== Confetti ===== */
.confetti{
  position:absolute; top:-10px; left:0; font-size:20px; line-height:1;
  animation:confettiFall 1200ms linear forwards; pointer-events:none; user-select:none;
}
@keyframes confettiFall{ to{ transform:translateY(110vh) rotate(360deg); opacity:0.9; } }

/* ===== Animations ===== */
.can.hit{animation:boing 500ms cubic-bezier(.34,1.56,.64,1)}
@keyframes boing{0%{transform:translateZ(0) scale(1,1)}40%{transform:scale(1.15,.9)}70%{transform:scale(.96,1.08)}100%{transform:scale(1,1)}}
#qualityBar.shake{animation:shake 520ms cubic-bezier(.36,.07,.19,.97)}
@keyframes shake{10%,90%{transform:translateX(-1px)}20%,80%{transform:translateX(2px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}
.scoreCenter.pop{animation:pop 280ms ease}
@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.12)}100%{transform:scale(1)}
}
#qualityBar.flash::after{content:"";position:absolute;inset:0;border-radius:999px;box-shadow:0 0 0 4px rgba(200,80,60,.25) inset;animation:flash 420ms ease forwards}
@keyframes flash{from{opacity:1} to{opacity:0}}

/* =========================
   Responsive tweaks
   ========================= */
@media (max-height: 720px){
  .play{ inset:200px 0 96px 0; }
}
@media (max-height: 660px){
  .play{ inset:180px 0 96px 0; }
  .scoreCenter{ margin:8px 0 4px; font-size:18px; }
  .bars{ padding:4px 14px 0 14px; gap:10px; }
  .bar{ height:16px; }
}
@media (max-height: 600px){
  .play{ inset:168px 0 96px 0; }
  .top{ padding:10px 12px; }
  .logo{ width:160px; height:24px; }
  .resetBtn{ padding:5px 10px; }
}
@media (max-width: 390px){
  .bars{ padding:4px 12px 0 12px; }
  .row button{ padding:9px 14px; }
  .modal{ width:92%; }
}

/* Tablet */
@media (min-width: 768px){
  .phone{ width:420px; height:840px; }
  .canWrap{
    width:160px;               /* 기존 170px → 160px */
    left:calc(50% - 80px);
    bottom:24px;               /* 기존 18px → 24px */
  }
  .can{ width:160px; height:160px; }
}

/* Desktop */
@media (min-width: 1200px){
  .phone{ width:min(960px, 92vw); height:600px; }
  .scoreCenter{ margin:16px 0 8px; }
  .bars{ padding:6px 24px 0 24px; }
  .play{ inset:200px 0 120px 0; }

  .canWrap{
    width: var(--can-size);
    left: calc(50% - (var(--can-size) / 2));
    bottom: 26px;             /* 기존 22px → 26px */
  }
  .can{
    width: var(--can-size);
    height: var(--can-size);
  }
}
/* Ultra-wide landscape: keep can smaller */
@media (min-width: 1200px) and (orientation: landscape){
  :root{ --can-size: var(--can-size-wide); }
}
@media (min-width: 1200px) and (orientation: portrait){
  :root{ --can-size: var(--can-size-desktop); }
}
@media (min-width: 1200px) and (max-aspect-ratio: 10/9){
  :root{ --can-size: var(--can-size-desktop); }
}
@media (min-width: 1200px) and (max-width: 1268px){
  .canWrap{
    width:133px;
    left:calc(50% - 66.5px);
    bottom:24px;             /* 기존 22px → 24px */
  }
  .can{ width:133px; height:133px; }
}
/* Milestone Toast */
.toast{
  position:absolute;
  top:140px; left:50%; transform:translateX(-50%);
  max-width:80%;
  background:#111; color:#fff; font-weight:800;
  padding:10px 14px; border-radius:999px;
  box-shadow:0 8px 20px rgba(0,0,0,.2);
  opacity:0; pointer-events:none;
  transition:opacity .18s ease, transform .18s ease;
  z-index:3; text-align:center; font-size:14px;
}
.toast.show{ opacity:1; transform:translateX(-50%) translateY(-4px); }

@media (min-width:1200px){
  .toast{ top:120px; }
}

/* ===== Sound status badge ===== */
.soundBadge{
  display:inline-block;
  margin-right:8px;
  padding:4px 8px;
  border-radius:999px;
  font-weight:800;
  font-size:12px;
  border:1px solid #e6e6e6;
  background:#f6f6f6;
  color:#444;
  user-select:none;
}
.soundBadge.-ready{ background:#eaffea; border-color:#b8e6b8; color:#0a7a0a; }  /* green */
.soundBadge.-locked{ background:#f3f3f3; border-color:#e4e4e4; color:#666; }    /* gray */
.soundBadge.-error{ background:#ffecec; border-color:#ffbaba; color:#b80000; }  /* red */
